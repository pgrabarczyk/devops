#009-ansible-vagrant-manually-ssh

Example of connect to vagrant VM using ansible outside Vagrantfile.

## Set up vagrant VM

```
mkdir ubuntu
cd ubuntu
vagrant init ubuntu/xenial64
vagrant up
```

## Configure host file for ansible

Copy 'IdentityFile' path generated by vagrant - it is needed to login via ssh:
```
vagrant ssh-config
```

You should be able to login to VM using your key:

```
ssh -i "/home/pgrabarczyk/VirtualBox VMs/ubuntu/.vagrant/machines/default/virtualbox/private_key" ubuntu@127.0.0.1 -p 2222
```

Now your hosts file should looks like:
```
[vagrant]
127.0.0.1:2222

[vagrant:vars]
ansible_python_interpreter=/usr/bin/python3
ansible_ssh_private_key_file=/home/pgrabarczyk/VirtualBox VMs/ubuntu/.vagrant/machines/default/virtualbox/private_key
```

## Execute ansible playbook

```
ansible-playbook -i hosts local-test.yml

PLAY [vagrant] ******************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
The authenticity of host '[127.0.0.1]:2222 ([127.0.0.1]:2222)' can't be established.
ECDSA key fingerprint is SHA256:Oq40HxxQO1MGRm+Dg6ALuPWi0cxmWAhQwFf7rjSW4XQ.
Are you sure you want to continue connecting (yes/no)? yes
ok: [127.0.0.1]

TASK [command] ******************************************************************************************************************************************************************************************************************************
changed: [127.0.0.1]

TASK [debug] ********************************************************************************************************************************************************************************************************************************
ok: [127.0.0.1] => {
    "msg": "Linux ubuntu-xenial 4.4.0-97-generic #120-Ubuntu SMP Tue Sep 19 17:28:18 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux"
}

PLAY RECAP **********************************************************************************************************************************************************************************************************************************
127.0.0.1                  : ok=3    changed=1    unreachable=0    failed=0

```

## Runned on configuration:
```
Vagrant 2.0.0
ansible 2.4.0.0
python version = 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609]
```